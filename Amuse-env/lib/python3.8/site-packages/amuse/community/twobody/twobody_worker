#!/media/tobias/Delta/Coding/Unity/NBodySim/Amuse-env/bin/python3
#This script was generated by the AMUSE framework
import sys
import os

if __name__ == '__main__':
    use_sockets = len(sys.argv) > 1
    if use_sockets:
        portnumber = int(sys.argv[1])
        host = sys.argv[2]
        usempi= sys.argv[3] == "true"
    else:
        usempi = True
        host = None
        portnumber = -1
        
    syspath = ('/tmp/pip-install-kohksfey/amuse-twobody_cc209c21fb1b4b818c9cbabe5855d350/build/temp.linux-x86_64-3.8/codes/twobody','/tmp/pip-build-env-1tyr59hh/overlay/bin','/tmp/pip-install-kohksfey/amuse-twobody_cc209c21fb1b4b818c9cbabe5855d350/build/temp.linux-x86_64-3.8/src','/tmp/pip-build-env-1tyr59hh/overlay/share/amuse/src','/tmp/pip-build-env-1tyr59hh/site','/usr/lib/python38.zip','/usr/lib/python3.8','/usr/lib/python3.8/lib-dynload','/tmp/pip-build-env-1tyr59hh/overlay/lib/python3.8/site-packages','/tmp/pip-build-env-1tyr59hh/normal/lib/python3.8/site-packages')
    existing_syspath = set(sys.path)
    for x in syspath:
        if not x in existing_syspath:
              sys.path.append(x)
    
    if usempi:
        from mpi4py import MPI
        from amuse.rfi.channel import MpiChannel
        MpiChannel.ensure_mpi_initialized()

    from amuse.rfi import core

    from interface import TwoBodyImplementation
    from interface import TwoBodyInterface

    instance = TwoBodyImplementation()

    from amuse.rfi.python_code import PythonImplementation

    x = PythonImplementation(instance, TwoBodyInterface)
    
    if use_sockets:
        if usempi:
            x.start_socket_mpi(portnumber, host)
        else:
            x.start_socket(portnumber, host)
    else:
        x.start()
